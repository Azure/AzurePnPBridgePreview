{
  "$schema" : "../../../pnpbridge/src/pnpbridge_config_schema.json",
  "pnp_bridge_parameters": {
    "_comment_connection_type": "dps (symmetric key support only)/connectionstring",
    "connection_parameters": {
      "connection_type" : "dps",
      "device_capability_model_uri": "[To fill in]",
      "auth_parameters" : {
        "auth_type" : "symmetric_key",
        "symmetric_key" : "[DEVICE KEY]"
      },
      "dps_parameters" : {
        "global_prov_uri" : "[GLOBAL PROVISIONING URI] - typically it is global.azure-devices-provisioning.net",
        "id_scope": "[IOT HUB ID SCOPE]",
        "device_id": "[DEVICE ID]"
      }
    },
    "trace_on": false
  },
  "config_source": "local",
  "_comment_devices": "Array of devices for Azure Pnp interface should be published",
  "devices": [
    {
      "_comment": "DEVICE4 - Modbus Sensor",
      "match_filters": {
        "match_type": "exact"
      },
      "self_describing": "true",
      "component_name": "MyComponent2",
      "pnp_parameters": {
        "identity": "modbus-pnp-interface"
      },
      "discovery_parameters": {
        "identity": "modbus-pnp-discovery",
        "_comment": "NOTE: ComPort parameter will be used when UseComDeviceInterface is set to true. In case of windows iot edition, the COMXX symbolic links are not created. Setting UseComDeviceInterface to false will pick the first available COM interface.",
        "deviceConfig": {
          "unitId": 5,
          "rtu": {
            "port": "COM1",
            "baudRate": "9600",
            "dataBits": 8,
            "stopBits": "ONE",
            "parity": "NONE"
          },
          "tcp":null
        },
        "interfaceConfig": {
          "interfaceId": "urn:contoso:com:Co2Detector:1",
          "telemetry": {
            "co": {
              "startAddress": "40001",
              "length": 1,
              "dataType": "integer",
              "defaultFrequency": 5000,
              "conversionCoefficient": 1
            },
            "co2": {
              "startAddress": "40002",
              "length": 1,
              "dataType": "integer",
              "defaultFrequency": 5000,
              "conversionCoefficient": 1
            },
            "relhum": {
              "startAddress": "40003",
              "length": 1,
              "dataType": "integer",
              "defaultFrequency": 5000,
              "conversionCoefficient": 0.01
            },
            "temperature": {
              "startAddress": "40005",
              "length": 1,
              "dataType": "decimal",
              "defaultFrequency": 5000,
              "conversionCoefficient": 0.01
            },
            "dewpoint": {
              "startAddress": "40006",
              "length": 1,
              "dataType": "integer",
              "defaultFrequency": 5000,
              "conversionCoefficient": 0.01
            }
          },
          "properties": {
            "firmwareVersion": {
              "startAddress": "40482",
              "length": 1,
              "dataType": "hexstring",
              "defaultFrequency": 60000,
              "conversionCoefficient": 1,
              "access": 1
            },
            "modelName": {
              "startAddress": "40483",
              "length": 2,
              "dataType": "string",
              "defaultFrequency": 60000,
              "conversionCoefficient": 1,
              "access": 1
            },
            "alarmStatus_co2": {
              "startAddress": "00305",
              "length": 1,
              "dataType": "boolean",
              "defaultFrequency": 1000,
              "conversionCoefficient": 1,
              "access": 1
            },
            "alarmThreshold_co2": {
              "startAddress": "40225",
              "length": 1,
              "dataType": "integer",
              "defaultFrequency": 30000,
              "conversionCoefficient": 1,
              "access": 2
            }
          },
          "commands": {
            "clearAlarm_co2": {
              "startAddress": "00305",
              "length": 1,
              "dataType": "flag",
              "conversionCoefficient": 1
            }
          }
        }
      }
    }
  ],
  "discovery_adapters": {
    "parameters": [
    ]
  }
}